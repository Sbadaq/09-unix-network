# 第五章 posix消息队列 

## 5.1 概述
posix消息队列是linux系统提供的一种消息传递机制，消息队列是先进先出（FIFO）的，消息队列中的消息是可读可写的，消息队列中的消息是可共享的，消息队列中的消息是可持久化的。
消息队列的创建和删除，以及消息的读写都是原子操作，所以消息队列是线程安全的。
posix消息队列和管道的区别：
 
消息队列和管道都是用于进程间通信的机制，但存在一些区别。
- 管道是字节流，消息队列是字节块；
- 管道是半双工的，只能用于读写；
消息队列的创建和删除，以及消息的读写都是原子操作，所以消息队列是线程安全的。

消息队列具有 随内核的一致性，这一点与fifo不同，fifo是随文件系统的一致性。
## 5.2 posix消息队列的创建
mq_open函数用于创建或打开一个消息队列。
mq_clo函数用于关闭一个消息队列。
mq_unlink函数用于删除一个消息队列。

## 5.3 posix消息队列的四个属性
mq_getattr函数用于获取消息队列的属性。
mq_setattr函数用于设置消息队列的属性。

## 5.4 mq_send函数和mq_receive函数
mq_send函数用于向消息队列中发送消息。
mq_receive函数用于从消息队列中接收消息。
mq_send函数和mq_receive函数都是原子操作，所以它们是线程安全的。

## 5.5 消息队列 的限制
消息队列的最大长度是1MB，消息队列的最大数量是1024。
mq_mqxmsgs函数用于获取消息队列的最大数量。
mq_msgsize 函数用于获取消息队列的最大长度。

## 5.6 mq_notify函数
mq_notify函数用于注册一个信号，当消息队列中有消息时，会发送这个信号。
mq_notify函数是异步的，所以它可以在消息队列中有消息时，立即发送信号。
mq_notify函数的参数是信号和消息队列。

### 5.6.1 简单信号通知
### 5.6.2 异步信号安全函数
### 5.6.3 信号通知
### 5.6.4 使用非阻塞的mq_receive信号通知
### 5.6.5 使用sigwait 代替信号处理程序的信号通知
### 5.6.6 使用select的posix消息队列 
### 5.6.7 启动线程 

## 5.7 posix 实时信号
signal_rt

## 5.8 使用内存映射io实现posix消息队列
### 5.8.1 mq_open函数
### 5.8.2 mq_close函数
### 5.8.3 mq_unlink函数
### 5.8.4 mq_getattr函数
### 5.8.5 mq_setattr函数
### 5.8.6 mq_notify函数
### 5.8.7 mq_send函数
### 5.8.8 mq_receive函数


